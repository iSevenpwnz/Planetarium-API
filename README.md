# Planetarium Booking API

REST API –¥–ª—è —Å–∏—Å—Ç–µ–º–∏ –æ–Ω–ª–∞–π–Ω-–±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∫–≤–∏—Ç–∫—ñ–≤ –Ω–∞ –∞—Å—Ç—Ä–æ–Ω–æ–º—ñ—á–Ω—ñ —à–æ—É —É –ø–ª–∞–Ω–µ—Ç–∞—Ä—ñ—ó. –°–∏—Å—Ç–µ–º–∞ –¥–æ–∑–≤–æ–ª—è—î –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞—Ç–∏ —à–æ—É, –∫—É–ø–æ–ª–∏, —Å–µ—Å—ñ—ó, —Ç–µ–º–∏ —à–æ—É, –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è, –∫–≤–∏—Ç–∫–∏ —Ç–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –ó–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥, –±—Ä–æ–Ω—é–≤–∞—Ç–∏ –º—ñ—Å—Ü—è —Ç–∞ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–≤–æ—é —ñ—Å—Ç–æ—Ä—ñ—é –±—Ä–æ–Ω—é–≤–∞–Ω—å.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

- CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π: AstronomyShow, ShowTheme, PlanetariumDome, ShowSession, Ticket, Reservation
- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (JWT) —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (email —è–∫ –ª–æ–≥—ñ–Ω)
- –ö–∞—Å—Ç–æ–º–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`/api/users/me/`)
- –ü–µ—Ä–µ–≥–ª—è–¥ —Ä–æ–∑–∫–ª–∞–¥—É —à–æ—É –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ç–∞ –ø–æ—à—É–∫—É (–∑–∞ —Ç–µ–º–∞–º–∏, –∫—É–ø–æ–ª–∞–º–∏, –¥–∞—Ç–∞–º–∏, –Ω–∞–∑–≤–æ—é)
- –ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∫–≤–∏—Ç–∫—ñ–≤ –∑ –≤–∏–±–æ—Ä–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –º—ñ—Å—Ü—å —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é –∑–∞–π–Ω—è—Ç–∏—Ö –º—ñ—Å—Ü—å
- –ü–µ—Ä–µ–≥–ª—è–¥ —ñ—Å—Ç–æ—Ä—ñ—ó –±—Ä–æ–Ω—é–≤–∞–Ω—å —Ç–∞ –∫–≤–∏—Ç–∫—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (—Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó—Ö)
- –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏–º–∏
- –ö–∞—Å—Ç–æ–º–Ω—ñ endpoints: –¥–æ—Å—Ç—É–ø–Ω—ñ –º—ñ—Å—Ü—è, –º—ñ—Å—Ç–∫—ñ—Å—Ç—å –∫—É–ø–æ–ª—É, —Å–µ—Å—ñ—ó –∫—É–ø–æ–ª—É, –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–æ —à–æ—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API (Swagger/Redoc)
- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ –ë–î (`select_related`/`prefetch_related`)
- –ü–æ–∫—Ä–∏—Ç—Ç—è —Ç–µ—Å—Ç–∞–º–∏ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ (pytest)

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–∞ —Å—Ç–µ–∫

- **Backend:** Python, Django, Django REST Framework
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** SQLite (–¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏), PostgreSQL (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è production)
- **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** djangorestframework-simplejwt (JWT)
- **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è:** django-filter
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API:** drf-yasg (Swagger/Redoc)
- **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** pytest, pytest-django
- **–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É:** black, isort, flake8

## üöÄ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Python 3.10+
- pip

### –Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è

1.  **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**

    ```bash
    git clone <your-repository-url>
    cd Planetarium-api
    ```

2.  **–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞ –∞–∫—Ç–∏–≤—É–π—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:**

    ```bash
    # Windows
    python -m venv venv
    .\venv\Scripts\activate

    # macOS/Linux
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**

    ```bash
    pip install -r requirements.txt
    ```

4.  **–ó–∞—Å—Ç–æ—Å—É–π—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó:**

    ```bash
    python manage.py migrate
    ```

5.  **–°—Ç–≤–æ—Ä—ñ—Ç—å —Å—É–ø–µ—Ä–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–¥–º—ñ–Ω–∫–∏ —Ç–∞ –ø–æ–≤–Ω–∏—Ö –ø—Ä–∞–≤):**

    ```bash
    python manage.py createsuperuser
    ```

6.  **–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä —Ä–æ–∑—Ä–æ–±–∫–∏:**
    ```bash
    python manage.py runserver
    ```
    API –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–µ –∑–∞ –∞–¥—Ä–µ—Å–æ—é `http://127.0.0.1:8000/api/`.

## ‚úÖ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

–î–ª—è –∑–∞–ø—É—Å–∫—É —Ç–µ—Å—Ç—ñ–≤ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É (–∑ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–º –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–º —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ–º):

```bash
pytest --ds=config.settings -v
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–∞–º–∏:

- **Swagger UI:** `http://127.0.0.1:8000/api/docs/`
- **ReDoc:** `http://127.0.0.1:8000/api/redoc/`

## üîó –û—Å–Ω–æ–≤–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

- `POST /api/users/register/` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- `POST /api/users/token/` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω–∞ (–ª–æ–≥—ñ–Ω)
- `POST /api/users/token/refresh/` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω–∞
- `GET/PUT/PATCH /api/users/me/` - –ü—Ä–æ—Ñ—ñ–ª—å –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- `GET /api/users/` - –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω–∞)

### –®–æ—É —Ç–∞ —Ç–µ–º–∏

- `GET/POST /api/astronomy-shows/` - –°–ø–∏—Å–æ–∫/–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–æ—É
- `GET/PUT/PATCH/DELETE /api/astronomy-shows/{id}/` - –î–µ—Ç–∞–ª—ñ/–û–Ω–æ–≤–ª–µ–Ω–Ω—è/–í–∏–¥–∞–ª–µ–Ω–Ω—è —à–æ—É
- `POST /api/astronomy-shows/{id}/upload-image/` - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω)
- `GET/POST /api/show-themes/` - –°–ø–∏—Å–æ–∫/–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ–º
- `GET/PUT/PATCH/DELETE /api/show-themes/{id}/` - –î–µ—Ç–∞–ª—ñ/–û–Ω–æ–≤–ª–µ–Ω–Ω—è/–í–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–µ–º–∏

### –ö—É–ø–æ–ª–∏

- `GET/POST /api/planetarium-domes/` - –°–ø–∏—Å–æ–∫/–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—É–ø–æ–ª—ñ–≤
- `GET/PUT/PATCH/DELETE /api/planetarium-domes/{id}/` - –î–µ—Ç–∞–ª—ñ/–û–Ω–æ–≤–ª–µ–Ω–Ω—è/–í–∏–¥–∞–ª–µ–Ω–Ω—è –∫—É–ø–æ–ª—É
- `GET /api/planetarium-domes/{id}/sessions/` - –°–ø–∏—Å–æ–∫ —Å–µ—Å—ñ–π –¥–ª—è –∫—É–ø–æ–ª—É
- `GET /api/planetarium-domes/{id}/capacity/` - –ú—ñ—Å—Ç–∫—ñ—Å—Ç—å –∫—É–ø–æ–ª—É

### –°–µ—Å—ñ—ó —à–æ—É

- `GET/POST /api/show-sessions/` - –°–ø–∏—Å–æ–∫/–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Å—ñ–π
- `GET/PUT/PATCH/DELETE /api/show-sessions/{id}/` - –î–µ—Ç–∞–ª—ñ/–û–Ω–æ–≤–ª–µ–Ω–Ω—è/–í–∏–¥–∞–ª–µ–Ω–Ω—è —Å–µ—Å—ñ—ó
- `GET /api/show-sessions/{id}/available-seats/` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º—ñ—Å—Ü—å

### –ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è —Ç–∞ –∫–≤–∏—Ç–∫–∏

- `GET/POST /api/reservations/` - –°–ø–∏—Å–æ–∫/–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—Ä–æ–Ω—é–≤–∞–Ω—å (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó)
- `GET /api/reservations/{id}/` - –î–µ—Ç–∞–ª—ñ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω–∏–∫ –∞–±–æ –∞–¥–º—ñ–Ω)
- `GET /api/tickets/` - –°–ø–∏—Å–æ–∫ –∫–≤–∏—Ç–∫—ñ–≤ (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó)
- `GET /api/tickets/{id}/` - –î–µ—Ç–∞–ª—ñ –∫–≤–∏—Ç–∫–∞ (—Ç—ñ–ª—å–∫–∏ –≤–ª–∞—Å–Ω–∏–∫ –∞–±–æ –∞–¥–º—ñ–Ω)
